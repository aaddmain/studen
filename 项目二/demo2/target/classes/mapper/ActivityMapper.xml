<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gzy.demo2.mapper.ActivityMapper">
    
    <!-- 结果映射 -->
    <resultMap id="ActivityResultMap" type="com.gzy.demo2.entity.Activity">
        <id property="activityId" column="activityId"/>
        <result property="activitySocietyId" column="activity_societyId"/>
        <result property="activityName" column="activity_name"/>
        <result property="activityIntro" column="activity_intro"/>
        <result property="activityStartTime" column="activity_start_time"/>
        <result property="activityEndTime" column="activity_end_time"/>
    </resultMap>
    
    <!-- 插入活动信息 -->
    <insert id="insertActivity" parameterType="com.gzy.demo2.entity.Activity">
        INSERT INTO activity (activity_societyId, activity_name, activity_intro, activity_start_time, activity_end_time)
        VALUES (#{activitySocietyId}, #{activityName}, #{activityIntro}, #{activityStartTime}, #{activityEndTime})
    </insert>
    
    <!-- 删除活动信息 -->
    <delete id="deleteActivityById" parameterType="java.lang.Integer">
        DELETE FROM activity WHERE activityId = #{activityId}
    </delete>
    
    <!-- 更新活动信息 -->
    <update id="updateActivity" parameterType="com.gzy.demo2.entity.Activity">
        UPDATE activity
        SET activity_societyId = #{activitySocietyId},
            activity_name = #{activityName},
            activity_intro = #{activityIntro},
            activity_start_time = #{activityStartTime},
            activity_end_time = #{activityEndTime}
        WHERE activityId = #{activityId}
    </update>
    
    <!-- 根据ID查询活动 -->
    <select id="selectActivityById" parameterType="java.lang.Integer" resultMap="ActivityResultMap">
        SELECT activityId, activity_societyId, activity_name, activity_intro, activity_start_time, activity_end_time
        FROM activity
        WHERE activityId = #{activityId}
    </select>
    
    <!-- 查询所有活动 -->
    <select id="selectAllActivities" resultMap="ActivityResultMap">
        SELECT activityId, activity_societyId, activity_name, activity_intro, activity_start_time, activity_end_time
        FROM activity
    </select>
    
    <!-- 根据关键词查询活动 -->
    <select id="selectActivitiesByKeyword" parameterType="java.lang.String" resultMap="ActivityResultMap">
        SELECT activityId, activity_societyId, activity_name, activity_intro, activity_start_time, activity_end_time
        FROM activity
        WHERE activity_name LIKE CONCAT('%', #{keyword}, '%')
        OR activity_intro LIKE CONCAT('%', #{keyword}, '%')
    </select>
    
</mapper>